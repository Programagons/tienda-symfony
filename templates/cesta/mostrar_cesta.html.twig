{% extends 'base.html.twig' %}

{% block title %}Cesta de Productos{% endblock %}

{% block contenido %}
    <h1>Mostrar Cesta</h1>

    {% if productos is empty %}
        <p>Tu cesta está vacía.</p>
    {% else %}
        <table border="1" cellpadding="5">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Descripción</th>
                    <th>Precio</th>
                    <th>Unidades</th>
                    <th>Eliminar</th>
                </tr>
            </thead>
            <tbody>
                {% for cod, producto in productos %}
                    <tr>
                        <td>{{ producto.nombre }}</td>
                        <td>{{ producto.descripcion }}</td>
                        <td>{{ producto.precio }}</td>
                        <td>{{ unidades[cod] }}</td>
                        <td>
                            <form method="POST" action="{{ path('eliminar') }}">
                                <input type="number" name="unidades" value="1" min="1">
                                <input type="hidden" name="producto_id" value="{{ producto.cod }}">
                                <button type="submit">Eliminar</button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <br>

        <form method="POST" action="{{ path('pedido') }}">
            <button type="submit">Enviar pedido</button>
        </form>
    {% endif %}
{% endblock %}
